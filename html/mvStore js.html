<div id="mvstore-javascript-interface-for-node.js"
><h1
  >mvStore Javascript Interface for node.js</h1
  ><p
  >The <a href="../nodejs/mvstore-client/lib/mvstore-client.js"
    >mvstore-client.js</a
    > module defines a simple interface between node.js and mvStore (via HTTP and the the <a href="./terminology.html#mvserver"
    >mvServer</a
    >). The interface is divided in three parts: <a href="#connection-creation"
    >connection creation</a
    >, <a href="#mvsql-access-with-json-response"
    >mvSQL access with JSON response</a
    >, and <a href="#object-friendly-access"
    >object-friendly access</a
    >.</p
  ><div id="connection-creation"
  ><h2
    >Connection Creation</h2
    ><p
    >To establish a new connection, a client simply needs to do the following:</p
    ><p
    >var lib_mvstore = require('mvstore-client'); var lMvStore = lib_mvstore.createConnection(&quot;http://localhost:4560/db/&quot;);</p
    ><p
    >This is assuming that mvServer runs on localhost and listens to port 4560, and that the <code
      >mvstore-client</code
      > module for node.js is properly installed.</p
    ><p
    >The resulting lMvStore object is the public interface of the connection, providing <a href="#mvsql-access-with-json-output"
      >mvSQL</a
      > access via its <code
      >mvsql</code
      > and <code
      >mvsqlCount</code
      > methods, and <a href="#object-friendly-access"
      >object-friendly</a
      > access via its <code
      >mvsqlProto</code
      >, <code
      >createPINs</code
      > and <code
      >txCtx</code
      > methods.</p
    ></div
  ><div id="mvsql-access-with-json-response"
  ><h2
    >mvSQL Access with JSON Response</h2
    ><p
    >This access path is self-sufficient and will feel most natural to people with SQL experience. Simply emit statements such as:</p
    ><p
    >var lOnResult = function(pError, pResult) { ... }; lMvStore.mvsql(&quot;INSERT (name, profession) VALUES ('Roger', 'Accountant');&quot;, lOnResult); lMvStore.mvsql(&quot;SELECT * WHERE EXISTS(name);&quot;, lOnResult);</p
    ><p
    >pResult is a parsed JSON response produced by mvStore.</p
    ><p
    >Note that this simple access path does not include any ORM or any means of feeding javascript objects (or JSON) directly to mvStore as input data (for example, it doesn't enable saving a javascript object with properties <code
      >name</code
      > and <code
      >profession</code
      >, nor will it automatically translate that intention into the <code
      >INSERT</code
      > statement shown just above). This is addressed by the <a href="#object-friendly-access"
      >object-friendly access methods</a
      >.</p
    ><p
    >This is a very powerful access path nonetheless. For more information, please refer to the <a href="./mvSQL%20reference.html"
      >mvSQL reference</a
      >.</p
    ></div
  ><div id="object-friendly-access"
  ><h2
    >Object-friendly Access</h2
    ><p
    >This access path complements mvSQL by allowing to create, retrieve and modify <code
      >PIN</code
      > objects without any translation to or from a query language.</p
    ><p
    >Our philosophy is similar to that of many recent graph and document databases, where distinct data objects are used to interact with the database, with no attempt to interfere with the application's run-time object model. In other words, we don't emulate the automatic object mapping of object-oriented databases, and the developer is not expected to subclass <code
      >PIN</code
      >.</p
    ><p
    >Here are some examples:</p
    ><p
    >var lOnResult = function(pError, pResult) { ... }; lMvStore.createPINs([{name:&quot;Roger&quot;, profession:&quot;Accountant&quot;}], lOnResult); lMvStore.mvsqlProto(&quot;SELECT * WHERE EXISTS(name);&quot;, function(pE, pR) { var lTxCtx = lMvStore.txCtx(); pR[0].set(&quot;profession&quot;, &quot;Lawyer&quot;, lTxCtx); lTxCtx.commit(lOnResult); });</p
    ><p style="color:red">REVIEW (maxw): provide the complete PIN, Collection and TxCtx interfaces<br
     />REVIEW (maxw): expand, link to sample material etc.<br
     />REVIEW (maxw): more on transactions, once this is completed in the library and stabilized in the server<br
     />REVIEW (maxw): more on streaming<br
     /></p>

</div
  ></div
>
